# 核心防御游戏规则说明

## 一、游戏基本框架----------------------------------------------------------------------------

### 1. 游戏模式
- 简单模式：1个核心（白色，初始直径为1个光标长度）
- 中等模式：1个贪吃蛇核心（白色，初始直径为1个光标长度，长度随得分增加）
- 困难模式：1个呼吸核心（白色，初始直径为1个光标长度，大小周期性变化）

### 2. 核心系统
- 白色核心跟随鼠标移动，白色核心中有粉色的玩家昵称
- 核心大小随生命值变化（生命值每降低1，核心变大5个像素）
- 护盾激活时显示蓝色光环（蓝色光环围绕白色核心）
- 中等模式：贪吃蛇核心长度随得分增加（每得10分增加1个原始直径长度）
- 困难模式：呼吸核心大小周期性变化（0.5-3倍原始直径，每2秒一个周期）

### 3. 投射体系统
- 从屏幕四边随机生成
- 生成时随机选择对准最近的核心或对准最远的核心
- 发射后保持直线运动
- 最大同时存在20个投射体
- 红色投射体一定造成伤害，其他投射体可能造成伤害（根据分数前方+/—符号变化）
- 伤害值每15秒随机变化

### 4. 页面系统
- 游戏开始页面（Start.html）：模式选择（默认初始页面 或 刷新游戏结算页面后跳转至该页面），输入玩家昵称
- 游戏规则页面（Help.html）：游戏规则显示（游戏规则下方有「回车键继续」按钮，回车后跳转至游戏进行页面）
- 游戏进行页面（Playing.html）：主游戏界面（模式选择完成后 从 游戏开始页面 跳转至该页面）
- 游戏结算页面（Gameover.html）：显示玩家昵称的最终得分和排行榜（游戏结束后 或按下ESC键后 从 游戏结算页面 跳转至该页面），显示跳转游戏开始界面的按钮

## 二、游戏规则----------------------------------------------------------------------------

### 1. 初始得分规则
- 绿色投射体：+5分
- 蓝色投射体：+8分
- 黄色投射体：+3分
- 紫色投射体：-6分
- 变色投射体：+7分
- 红色投射体：-10分
- 黑色投射体：随机分数（-5分或+5分）

- 只有红色投射体造成伤害，其他投射体只影响分数
- 变色投射体初始颜色为任意颜色，运动中途变为任意其他颜色
- 除红色以外其他投射体的分数每15秒随机变化，加分或减分也随机变化

### 2. 生命值系统
- 初始生命值：100
- 生命值只受红色投射体影响，不可累加，但会减少。
- 伤害值每15秒随机变化
- 生命值为0时游戏结束

### 3. 护盾系统
- 按住空格键激活护盾
- 护盾状态下：
  * 绿色投射体：+0分
  * 蓝色投射体：+0分
  * 黄色投射体：+0分
  * 紫色投射体：+0分
  * 变色投射体：+0分
  * 红色投射体：+0分
  * 黑色投射体：+0分

## 三、特殊机制----------------------------------------------------------------------------

### 1. 投射体裂变
- 30%概率发生裂变
- 裂变时间：1-3秒随机
- 裂变体数量：2-5个随机
- 裂变体速度提升50%
- 裂变体大小缩小30%
- 原投射体在裂变后消失
- 裂变体继承原投射体的属性

### 2. 道具系统
- 冻结（F键）：
  * 持续时间：5秒
  * 冷却时间：15秒
  * 次数：3次/局
  * 效果：暂停所有投射体

- 双倍分数（D键）：
  * 持续时间：8秒
  * 冷却时间：20秒
  * 次数：3次/局
  * 效果：得分翻倍，伤害也翻倍

- 无敌（I键）：
  * 持续时间：3秒
  * 冷却时间：30秒
  * 次数：3次/局
  * 效果：免疫伤害并得分，但投射体移动速度增加20%

### 3. 难度递增
- 基础速度：3
- 每10秒速度增加0.2
- 最大速度限制：8
- 分数变化间隔：15秒

## 四、游戏控制----------------------------------------------------------------------------

### 1. 键盘控制
- 空格键：激活护盾
- F键：激活冻结
- D键：激活双倍分数
- I键：激活无敌
- R键：立即清空分数值和生命值，重新开始
- ESC键：立即返回结算页面
- Q键：返回模式选择

### 2. 鼠标控制
- 移动鼠标控制核心位置（核心位置实时跟随鼠标无延迟）
- 点击选择游戏模式

## 五、计分系统----------------------------------------------------------------------------

### 1. 分数记录
- 实时显示当前分数
- 实时显示游戏用时（计时器格式为「00:00:00」）
- 记录最高分排行榜（前5名）
- 分数随难度模式调整：
  * 简单模式：1.0倍
  * 中等模式：1.5倍
  * 困难模式：2.0倍

### 2. 游戏结束
- 生命值为0时结束
- 显示最终分数
- 显示最高分排行榜
- 可选择重新开始

## 六、游戏右侧显示----------------------------------------------------------------------------

### 1. 主信息面板
- 显示当前分数
- 显示当前生命值
- 显示当前游戏速度
- 显示游戏用时

### 2. 道具状态面板
- 显示所有道具的当前状态：
  * 激活中（绿色倒计时  显示剩余次数）
  * 冷却中（橙色，显示剩余冷却时间， 显示剩余次数）
  * 就绪（白色）

### 3. 投射物分数面板
- 显示所有类型投射物的当前分数
- 显示分数变化倒计时
- 使用对应颜色的小圆点标识投射物类型

### 4. 操作提示
- 显示ESC键终止游戏提示
- 显示当前游戏模式
- 显示玩家昵称

## 七、游戏日志（2025）----------------------------------------------------------------------------

### 05250142更新
1. 优化ESC键功能：按下后自动返回开始界面
2. 新增计时功能
3. 新增"裂变"特效
4. 页面系统重构为三个独立页面
5. 投射体伤害机制优化
6. 修复界面文字重叠问题

### 05250216更新
1. 优化投射体目标选择机制
2. 新增精确计时显示（精确到0.1秒）（计时器格式为「00:00:00」）
3. 优化投射体伤害机制
4. 完善"裂变"特效

### 05250247更新
1. 优化裂变机制：原投射体消失，保留裂变体
2. 修复计时器显示问题
3. 优化ESC键功能
4. 删除重复的游戏模式选择

### 05250308更新
1. 优化投射体运动机制：发射后保持直线运动
2. 完善裂变体机制：数量2-5个随机
3. 优化ESC键功能：跳转至结算页面 

### 05250744更新
1. 新增背景切换功能：
   - 默认使用灰色背景
   - 点击「切换背景」按钮切换到动态背景
   - 再次点击恢复灰色背景

2. 新增惯性系统：
   - 默认开启惯性效果
   - 点击「惯性」按钮可切换
   - 开启时核心移动更平滑
   - 关闭时核心直接跟随鼠标

3. 新增变色模式：
   - 点击「变色」按钮开启
   - 所有投射物变为绿色
   - 所有分数强制变为正数
   - 红色投射物不再造成伤害

4. 新增分数特效：
   - 击中核心时显示分数变化
   - 加分显示为绿色"+N"
   - 减分显示为红色"-N"
   - 特效向上浮动并渐隐

5. 新增核心视觉效果：
   - 三层同心圆结构
   - 外圈：30%透明度
   - 中圈：50%透明度
   - 内圈：100%不透明

6. 新增特效系统：
   - 「灵敏」：连续躲避10个红色投射物，奖励无敌+1
   - 「精准」：连续获得20分，奖励护盾+1
   - 「集中注意」：累计减30分且没有获得1分，暂无奖励

## 八、补充说明----------------------------------------------------------------------------

### 1. 投射体系统补充
- 只有红色投射体造成伤害，其他投射体只影响分数（变色投射体变为红色投射体后可造成伤害）
- 投射体颜色统一为：红色、绿色、黄色、黑色、蓝色、紫色
- 投射体分数变化范围：-10到+10
- 不同颜色投射体的分数变化相互独立

### 2. 护盾系统补充
- 持续时间：5秒
- 冷却时间：15秒
- 使用次数：3次/局
- 护盾激活时显示蓝色光环，免疫所有伤害

### 3. 计时器显示补充
- 统一使用"00:00:00"格式
- 精确到0.1秒
- 游戏结束时显示总用时

### 4. 裂变机制补充
- 裂变体运动方向：以原投射体方向为基准，随机偏移±30度
- 裂变体继承原投射体的颜色和分数
- 裂变体大小：原投射体的70%
- 裂变体速度：原投射体的150%

### 5. 难度递增补充
- 基础速度：3像素/帧
- 每10秒速度增加0.2
- 投射体生成频率：每1秒生成1个
- 不同模式初始速度：
  * 简单模式：3像素/帧
  * 中等模式：3.5像素/帧
  * 困难模式：4像素/帧

### 6. 页面跳转逻辑补充
- ESC键：跳转至结算页面
- 结算页面：显示最终得分和排行榜
- 结算页面按钮：
  * "重新开始"：跳转至游戏进行页面
  * "返回主页"：跳转至开始页面

### 7. 游戏模式差异补充
- 投射体生成频率：
  * 简单模式：1个/秒
  * 中等模式：1.2个/秒
  * 困难模式：1.5个/秒
- 初始生命值：
  * 简单模式：100
  * 中等模式：100
  * 困难模式：100
- 分数倍率：
  * 简单模式：1.0倍
  * 中等模式：1.5倍
  * 困难模式：2.0倍
- 核心特性：
  * 简单模式：固定大小核心
  * 中等模式：贪吃蛇核心（长度随得分增加）
  * 困难模式：呼吸核心（大小周期性变化）

### 8. 新增模式特性补充
- 中等模式贪吃蛇核心：
  * 初始长度：1个原始直径
  * 长度增长：每得10分增加1个原始直径
  * 最大长度：无限制
  * 宽度固定：等于原始直径
  * 移动特性：跟随鼠标移动，保持平滑转向

- 困难模式呼吸核心：
  * 初始大小：1个原始直径
  * 大小范围：0.5-3倍原始直径
  * 变化周期：2秒
  * 变化方式：平滑缩放
  * 碰撞判定：使用当前实际大小 